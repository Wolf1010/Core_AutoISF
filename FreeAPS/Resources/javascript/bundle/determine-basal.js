var freeaps_determineBasal;(()=>{var e={5546:(e,r,a)=>{var t=a(6880);function o(e,r){r||(r=0);var a=Math.pow(10,r);return Math.round(e*a)/a}function n(e,r){return"mmol/L"===r.out_units?o(.0555*e,1):Math.round(e)}var i="",s="",l="",u="",d="",m="",c="",p="",b="",g="",f="",h="",v=1,B=1,_=1,M=1,S=1;function y(e,r,a){"bg"==a?(polyX=[50,60,80,90,100,110,150,180,200],polyY=[-.5,-.5,-.3,-.2,0,0,.5,.7,.7]):"delta"==a&&(polyX=[2,7,12,16,20],polyY=[0,0,.4,.7,.7]);var t=polyX.length-1,o=polyX[0],n=polyY[0],i=polyX[t],s=polyY[t],l=1,u=1,d=1,m=o;if(o>e)i=polyX[1],l=(u=n)+((s=polyY[1])-u)/(i-(d=o))*(e-d);else if(i<e)o=polyX[t-1],l=(u=n=polyY[t-1])+(s-u)/(i-(d=o))*(e-d);else for(var c=0;c<=t;c++){if(o=polyX[c],n=polyY[c],o==e){l=n;break}if(o>e){l=u+(n-u)/(o-(d=m))*(e-d);break}u=n,m=o}return l*="delta"==a?r.delta_ISFrange_weight:e>100?r.higher_ISFrange_weight:r.lower_ISFrange_weight}function x(e,r,a,t,n,i,s,l,u){console.error("check ratio "+o(e,2)+" against autoISF min: "+r+" and autoISF max: "+a),e<r?(b=" (lmtd.min)",c="weakest autoISF factor "+o(e,2)+" limited by autoISF_min "+r,console.error(c),e=r):e>a&&(b=" (lmtd.max)",c="strongest autoISF factor "+o(e,2)+" limited by autoISF_max "+a,console.error(c),e=a);var d=1;return s&&i.temptargetSet&&l>u?(d=e*t,n=" (exerciseMode)",console.error("autoISF adjusts sens "+t+", instead of profile.sens "+i.sens),g=n):e>=1?(d=Math.max(e,t),e>=t&&(n="")):(d=Math.min(e,t),e<=t&&(n="")),c="final ISF factor "+o(d,2)+n,console.error(c),d}e.exports=function(e,r,a,I,F,T,w,C,D,O,G,R,U,A){var E=0,P="",k="",j="",q="",W="",z=0,N=0,L=0,X=0,Y=0,H=0;const Z=A.tddYtd,$=A.tdd7d,J=A.hbt,K=A.isEnabled;function Q(e,r){var a=e.getTime();return new Date(a+36e5*r)}function V(e){var r=I.bolus_increment;.025!=r&&(r=.05);var a=e/r;return a>=1?o(Math.floor(a)*r,5):0}function ee(e){function r(e){return e<10&&(e="0"+e),e}return r(e.getHours())+":"+r(e.getMinutes())+":00"}function re(e,r){var a=new Date("1/1/1999 "+e),t=new Date("1/1/1999 "+r);return(a.getTime()-t.getTime())/36e5}function ae(e,r){var a=0,t=r,o=(e-r)/36e5,n=0,i=o,s=0;do{if(o>0){var l=ee(t);U[0].rate;for(let e=0;e<U.length;e++){var u=U[e].start;if(l==u){if(e+1<U.length){o>=(s=re(U[e+1].start,U[e].start))?n=s:o<s&&(n=o)}else if(e+1==U.length){let r=U[0].start;o>=(s=24-re(U[e].start,r))?n=s:o<s&&(n=o)}a+=V(U[e].rate*n),o-=n,t=Q(t,n)}else if(l>u)if(e+1<U.length){var d=U[e+1].start;l<d&&(o>=(s=re(d,l))?n=s:o<s&&(n=o),a+=V(U[e].rate*n),o-=n,t=Q(t,n))}else if(e==U.length-1){o>=(s=re("23:59:59",l))?n=s:o<s&&(n=o),a+=V(U[e].rate*n),o-=n,t=Q(t,n)}}}}while(o>0&&o<i);return a}if(G.length){let e=G.length-1;var te=new Date(G[e].timestamp),oe=new Date(G[0].timestamp);if("TempBasalDuration"==G[0]._type&&(oe=new Date),(E=(oe-te)/36e5)<23.9&&E>21)Y=ae(te,(ne=24-E,ie=te.getTime(),new Date(ie-36e5*ne))),q="24 hours of data is required for an accurate tdd calculation. Currently only "+E.toPrecision(3)+" hours of pump history data are available. Using your pump scheduled basals to fill in the missing hours. Scheduled basals added: "+Y.toPrecision(5)+" U. ";else q=""}else console.log("Pumphistory is empty!"),dynISFenabled=!1,enableDynamicCR=!1;var ne,ie,se=0,le=0;o((new Date(xe).getTime()-T.lastBolusNormalTime)/6e4,1);for(let e=0;e<G.length;e++)if("Bolus"==G[e]._type&&(X+=G[e].amount,0==se&&G[e].amount>=I.iTime_Start_Bolus)){se=t(G[e].amount,I);var ue=new Date(G[e].timestamp);le=o((new Date-ue)/36e5*60)}for(let e=1;e<G.length;e++)if("TempBasal"==G[e]._type&&G[e].rate>0){z=e,H=G[e].rate;var de=G[e-1]["duration (min)"]/60,me=de,ce=new Date(G[e-1].timestamp),pe=ce;do{if(e--,0==e){pe=new Date;break}if("TempBasal"==G[e]._type||"PumpSuspend"==G[e]._type){pe=new Date(G[e].timestamp);break}}while(e>0);var be=(pe-ce)/36e5;be<me&&(de=be),L+=V(H*de),e=z}for(let e=0;e<G.length;e++)if(0,0==G[e]["duration (min)"]||"PumpResume"==G[e]._type){let r=new Date(G[e].timestamp),a=r,t=e;do{if(t>0&&(--t,"TempBasal"==G[t]._type)){a=new Date(G[t].timestamp);break}}while(t>0);(a-r)/36e5>0&&(Y+=ae(a,r))}for(let e=G.length-1;e>0;e--)if("TempBasalDuration"==G[e]._type){let r=G[e]["duration (min)"]/60,a=new Date(G[e].timestamp);var ge=a;let t=e;do{if(--t,t>=0&&("TempBasal"==G[t]._type||"PumpSuspend"==G[t]._type)){ge=new Date(G[t].timestamp);break}}while(t>0);if(0==e&&"TempBasalDuration"==G[0]._type&&(ge=new Date,r=G[e]["duration (min)"]/60),(ge-a)/36e5-r>0){Y+=ae(ge,Q(a,r))}}var fe={TDD:o(N=X+L+Y,5),bolus:o(X,5),temp_basal:o(L,5),scheduled_basal:o(Y,5)},he=N;E>21?(k=". Bolus insulin: "+X.toPrecision(5)+" U",j=". Temporary basal insulin: "+L.toPrecision(5)+" U",P=". Insulin with scheduled basal rate: "+Y.toPrecision(5)+" U",W=q+(" TDD past 24h is: "+N.toPrecision(5)+" U")+k+j+P,tddReason=", TDD, 24h: "+o(N,1)+", ytd: "+o(Z,1)+", 7d√ò: "+o($,1),console.error(W)):tddReason=", TDD: Not enough pumpData (< 21h)";var ve={},Be=0,_e=0,Me=new Date;if(O&&(Me=new Date(O)),void 0===I||void 0===I.current_basal)return ve.error="Error: could not get current basal rate",ve;var Se=t(I.current_basal,I),ye=Se,xe=new Date;O&&(xe=O);var Ie,Fe=new Date(e.date),Te=o((xe-Fe)/60/1e3,1),we=e.glucose,Ce=e.noise;Ie=n(e.delta,I);var De=Math.min(e.delta,e.short_avgdelta),Oe=Math.min(e.short_avgdelta,e.long_avgdelta),Ge=Math.max(e.delta,e.short_avgdelta,e.long_avgdelta);(we<=10||38===we||Ce>=3)&&(ve.reason="CGM is calibrating, in ??? state, or noise is high");if(Te>12||Te<-5?ve.reason="If current system time "+xe+" is correct, then BG data is too old. The last BG data was read "+Te+"m ago at "+Fe:we>60&&e.cgmFlatMinutes>89&&(e.last_cal&&e.last_cal<3?ve.reason="CGM was just calibrated":ve.reason="Error: CGM data was suspiciously flat for the past ~"+o(e.cgmFlatMinutes,1)+"m"),we<=10||38===we||Ce>=3||Te>12||Te<-5||we>60&&e.cgmFlatMinutes>89)return r.rate>ye?(ve.reason+=". Replacing high temp basal of "+r.rate+" with neutral temp of "+ye,ve.deliverAt=Me,ve.temp="absolute",ve.duration=30,ve.rate=ye,ve):0===r.rate&&r.duration>30?(ve.reason+=". Shortening "+r.duration+"m long zero temp to 30m. ",ve.deliverAt=Me,ve.temp="absolute",ve.duration=30,ve.rate=0,ve):(ve.reason+=". Temp "+r.rate+" <= current basal "+o(ye,2)+"U/hr; doing nothing. ",ve);var Re,Ue,Ae,Ee,Pe=I.max_iob;if(void 0!==I.min_bg&&(Ue=I.min_bg),void 0!==I.max_bg&&(Ae=I.max_bg),void 0!==I.enableSMB_high_bg_target&&(Ee=I.enableSMB_high_bg_target),void 0===I.min_bg||void 0===I.max_bg)return ve.error="Error: could not determine target_bg. ",ve;Re=(I.min_bg+I.max_bg)/2;var ke="",je=I.exercise_mode||I.high_temptarget_raises_sensitivity,qe=100,We=160;if(I.half_basal_exercise_target&&(We=I.half_basal_exercise_target),K&&(We=J),je&&I.temptargetSet&&Re>qe||I.low_temptarget_lowers_sensitivity&&I.temptargetSet&&Re<qe){var ze=We-qe;sensitivityRatio=ze*(ze+Re-qe)<=0?I.autosens_max:ze/(ze+Re-qe),sensitivityRatio=Math.min(sensitivityRatio,I.autosens_max),sensitivityRatio=o(sensitivityRatio,2),ke="from TT modifier",f+=", Ratio TT: "+sensitivityRatio,process.stderr.write("Sensitivity ratio set to "+sensitivityRatio+" based on temp target of "+Re+"; ")}else void 0!==F&&F&&(sensitivityRatio=F.ratio,ke="from Autosens",process.stderr.write("Autosens ratio: "+sensitivityRatio+"; "));if(sensitivityRatio&&(ye=I.current_basal*sensitivityRatio,(ye=t(ye,I))!==Se?process.stderr.write("Adjusting basal from "+Se+" to "+ye+"; "):process.stderr.write("Basal unchanged: "+ye+"; ")),I.temptargetSet);else if(void 0!==F&&F&&(I.sensitivity_raises_target&&F.ratio<1||I.resistance_lowers_target&&F.ratio>1)){Ue=o((Ue-60)/F.ratio)+60,Ae=o((Ae-60)/F.ratio)+60;var Ne=o((Re-60)/F.ratio)+60;Re===(Ne=Math.max(80,Ne))?process.stderr.write("target_bg unchanged: "+Ne+"; "):process.stderr.write("target_bg from "+Re+" to "+Ne+"; "),Re=Ne}var Le=200,Xe=200,Ye=200;if(e.noise>=2){var He=Math.max(1.1,I.noisyCGMTargetMultiplier);Math.min(250,I.maxRaw);Le=o(Math.min(200,Ue*He)),Xe=o(Math.min(200,Re*He)),Ye=o(Math.min(200,Ae*He)),process.stderr.write("Raising target_bg for noisy / raw CGM data, from "+Re+" to "+Xe+"; "),Ue=Le,Re=Xe,Ae=Ye}var Ze=Ue-.5*(Ue-40),$e=o(I.sens,1),Je=I.sens;void 0!==F&&F&&((Je=o(Je=I.sens/sensitivityRatio,1))!==$e?process.stderr.write("ISF from "+n($e,I)+" to "+n(Je,I)):process.stderr.write("ISF unchanged: "+n(Je,I))),console.error("CR:"+I.carb_ratio),console.error("----------------------------------"),console.error(" start autoISF"),console.error("----------------------------------");var Ke=!0,Qe=!1,Ve=r.rate,er=I.b30_duration,rr=er+1;if(console.error("B30 enabled: "+I.use_B30),I.use_B30&&I.use_autoisf){var ar=I.iTime_Start_Bolus,tr=I.iTime_target,or=I.b30_upperBG,nr=I.b30_upperdelta,ir=I.b30_factor,sr=!1;I.temptargetSet&&(sr=!0);var lr=le;0==lr&&(lr=1);var ur=se;console.error("B30 last bolus above limit of "+ar+"U was "+ur+"U, "+lr+"m ago"),ur>=ar&&lr<=er&&sr&&Re==tr&&(rr=lr,Qe=!0,console.error("B30 iTime is running : "+rr+"m because manual bolus ("+ur+") >= Minimum Start Bolus size ("+ar+") and EatingSoon TT set at "+n(tr,I))),console.error("B30 Activation: "+Qe),console.error("B30 TTset: "+sr+", at "+Re+", last Bolus of "+ur+"U, "+lr+"m ago. iTime remaining: "+(er-rr)+"m."),Qe&&(e.delta<=nr&&we<or&&(Ke=!1),rr<=er&&(Ve=t(ye*ir,I),h="AIMI B30, Temp "+Ve+"U/hr for "+(er-rr)+"m, "))}var dr=function(e,r,a){if(e.use_autoisf&&e.iob_threshold>0&&e.iob_threshold<r[0].iob)return s=", autoISF-SMB disabled:, IOB: "+o(r[0].iob,2)+", > threshold: "+e.iob_threshold+", maxIOB: "+e.max_iob,console.error(s),"iobTH";if(!a)return s=", autoISF-SMB disabled:, B30 running","AIMI B30";var t=n(e.min_bg,e);return e.use_autoisf&&e.temptargetSet&&e.enableSMB_EvenOn_OddOff||e.use_autoisf&&e.min_bg==e.max_bg&&e.enableSMB_EvenOn_OddOff_always?(e.temptargetSet?msgType="TempTarget ":msgType="profile target ","mmol/L"==e.out_units?(evenTarget=o(10*t,0)%2==0,msgUnits=" has ",msgTail=" decimal"):(evenTarget=t%2==0,msgUnits=" is ",msgTail=" number"),evenTarget?msgEven="even":msgEven="odd",evenTarget?(console.error("SMB enabled - "+msgType+t+msgUnits+msgEven+msgTail),console.error("enableSMB_EvenOn_OddOff = "+e.enableSMB_EvenOn_OddOff+", enableSMB_EvenOn_OddOff_alway = "+e.enableSMB_EvenOn_OddOff_always),e.temptargetSet&&t<100?(console.error("Full Loop enabled, SMB enforced"),s=", autoISF-SMB enabled:, even TT","enforced"):(s=", autoISF-SMB enabled:, even Target","enabled")):(console.error("SMB disabled - "+msgType+t+msgUnits+msgEven+msgTail),s=", autoISF-SMB disabled:, odd Target","blocked")):"oref"}(I,a,Ke),mr=!0;if(C&&"oref"!=dr?("blocked"!=dr&&"AIMI B30"!=dr||(mr=!1),console.error("loopSMB function overriden with autoISF target toggle, enableSMB = "+mr)):(mr=function(e,r,a,t,o,i){return r?!e.allowSMB_with_high_temptarget&&e.temptargetSet&&o>100?(console.error("SMB disabled due to high temptarget of "+o),!1):!0===a.bwFound&&!1===e.A52_risk_enable?(console.error("SMB disabled due to Bolus Wizard activity in the last 6 hours."),!1):!0===e.enableSMB_always?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled due to enableSMB_always"),!0):!0===e.enableSMB_with_COB&&a.mealCOB?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for COB of"+a.mealCOB),!0):!0===e.enableSMB_after_carbs&&a.carbs?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for 6h after carb entry"),!0):!0===e.enableSMB_with_temptarget&&e.temptargetSet&&o<100?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for temptarget of "+n(o,e)),!0):!0===e.enableSMB_high_bg&&null!==i&&t>=i?(console.error("Checking BG to see if High for SMB enablement."),console.error("Current BG",t," | High BG ",i),a.bwFound?console.error("Warning: High BG SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("High BG detected. Enabling SMB."),!0):(console.error("SMB disabled (no enableSMB preferences active or no condition satisfied)"),!1):(console.error("SMB disabled (!microBolusAllowed)"),!1)}(I,C,T,we,Re,Ee),console.error("loopSMB function returns enableSMB = "+mr)),Je=function(e,r,a,t,f,h,I,F,T,w,C,D){if(!t.use_autoisf)return console.error("autoISF disabled in Preferences"),i+=", autoISF, disabled",e;if(t.autoISF_off_Sport&&(t.high_temptarget_raises_sensitivity||t.exercise_mode)&&t.temptargetSet&&a>D)return console.error("autoISF disabled due to exercise"),i+=", autoISF, disabled (exercise)",e;const O=f.dura_p,G=f.delta_pl,R=f.delta_pn,U=f.r_squ,A=f.bg_acceleration,E=f.a_0,P=f.a_1,k=f.a_2,j=f.dura_ISF_minutes,q=f.dura_ISF_average;var W=t.autoISF_min,z=t.autoISF_max,N=!1,L=e,X=a+10-q,Y=f.pp_debug;if("bg_acceleration: "+o(A,3)+", PF-minutes: "+O+", PF-corr: "+o(U,4)+", PF-nextDelta: "+n(R,t)+", PF-lastDelta: "+n(G,t)+", regular Delta: "+n(f.delta,t),console.error(Y),t.enable_BG_acceleration){var H=U;if(0!=k&&H>=.9){var Z=-P/2/k*5,$=o(E-Z*Z/25*k,1);(Z=o(Z,1))>0&&A<0?(p="predicts a Max of "+n($,t)+", in about "+Math.abs(Z)+"min",console.error("Parabolic fit "+p)):Z>0&&A>0?(p="predicts a Min of "+n($,t)+", in about "+Math.abs(Z)+"min",console.error("Parabolic fit "+p)):Z<0&&A<0?(p="saw Max of "+n($,t)+", about "+Math.abs(Z)+"min ago",console.error("Parabolic fit "+p)):Z<0&&A>0&&(p="saw Min of "+n($,t)+", about "+Math.abs(Z)+"min ago",console.error("Parabolic fit "+p))}if(H<.9)p="acce_ISF by-passed, as correlation, "+o(H,2)+", is too low",console.error("Parabolic fit "+p),m+=", Parabolic Fit, "+p;else{var J=10*(H-.9),K=1,Q=1;f.glucose<t.target_bg?A>0?(A>1&&(K=.5),Q=t.bgBrake_ISF_weight):A<0&&(Q=t.bgAccel_ISF_weight):A<0?Q=t.bgBrake_ISF_weight:A>0&&(Q=t.bgAccel_ISF_weight),(v=1+A*K*Q*J)<0&&(v=.1),console.error(m+"acce_ISF adaptation is "+o(v,2)),1!=v&&(N=!0,m+=", Parabolic Fit, "+p+", acce-ISF Ratio: "+o(v,2))}}else console.error("autoISF BG accelertion adaption disabled in Preferences");i+=s+m+", autoISF",B=1+y(100-X,t,"bg"),console.error("bg_ISF adaptation is "+o(B,2));var V=1,ee=1;if(B<1)return V=Math.min(B,v),v>1?(c="bg-ISF adaptation lifted to "+o(V=B*v,2)+", as BG accelerates already",console.error(c),i+=", bg-ISF Ratio: "+o(V,2)+"(accel.)"):i+=", bg-ISF Ratio: "+o(V,2)+"(minimal)",ee=x(V,W,z,T,r,t,C,a,D),L=Math.min(720,o(t.sens/ee,1)),i+=", bg-ISF Ratio: "+o(ee,2),L;B>1&&(N=!0,i+=", bg-ISF Ratio: "+o(B,2));var re=f.delta;t.enable_pp_ISF_always||t.pp_ISF_hours>=(I-h.lastCarbTime)/1e3/3600?deltaType="pp":deltaType="delta",X>0?console.error(deltaType+"_ISF adaptation by-passed as average glucose < "+a+"+10"):f.short_avgdelta<0?console.error(deltaType+"_ISF adaptation by-passed as no rise or too short lived"):"pp"==deltaType?(M=1+Math.max(0,re*t.pp_ISF_weight),console.error("pp_ISF adaptation is "+o(M,2)),u=", pp-ISF Ratio: "+o(M,2),1!=M&&(N=!0)):(_=y(re,t,"delta"),X>-20&&(_*=.5),_=1+_,console.error("delta_ISF adaptation is "+o(_,2)),d=", Œî-ISF Ratio: "+o(_,2),1!=_&&(N=!0));var ae=t.dura_ISF_weight;h.mealCOB>0&&!t.enableautoisf_with_COB?console.error("dura_ISF by-passed; preferences disabled mealCOB of "+o(h.mealCOB,1)):j<10?console.error("dura_ISF by-passed; BG is only "+j+"m at level "+q):q<=a?console.error("dura_ISF by-passed; avg. glucose "+q+" below target "+n(a,t)):(S+=j/60*(ae/a)*(q-a),N=!0,l=", Duration: "+j+", Avg: "+n(q,t)+", dura-ISF Ratio: "+o(S,2),console.error("dura_ISF adaptation is "+o(S,2)+" because ISF "+e+" did not do it for "+o(j,1)+"m"));return N?(V=Math.max(S,B,_,v,M),console.error("autoISF adaption ratios:"),console.error("  dura "+o(S,2)),console.error("  bg "+o(B,2)),console.error("  delta "+o(_,2)),console.error("  pp "+o(M,2)),console.error("  accel "+o(v,2)),v<1&&(c="strongest ISF factor "+o(V,2)+" weakened to "+o(V*v,2)+" as bg decelerates already",console.error(c),V*=v),ee=x(V,W,z,T,r,t,C,a,D),L=o(t.sens/ee,1),i+=u+d+l+", final Ratio: "+o(ee,2)+g+b+", final ISF: "+n(t.sens,t)+"‚Üí"+n(L,t),L):(i+=", not modified",console.error("autoISF does not modify"),L)}(Je,ke,Re,I,e,T,O,0,sensitivityRatio,0,je,qe),console.error("----------------------------------"),console.error(" end autoISF"),console.error("----------------------------------"),void 0===a)return ve.error="Error: iob_data undefined. ",ve;var cr,pr=a;if(a.length,a.length>1&&(a=pr[0]),void 0===a.activity||void 0===a.iob)return ve.error="Error: iob_data missing some property. ",ve;var br=((cr=void 0!==a.lastTemp?o((new Date(xe).getTime()-a.lastTemp.date)/6e4):0)+r.duration)%30;if(console.error("currenttemp:"+r.rate+" lastTempAge:"+cr+"m, tempModulus:"+br+"m"),ve.temp="absolute",ve.deliverAt=Me,C&&r&&a.lastTemp&&r.rate!==a.lastTemp.rate&&cr>10&&r.duration)return ve.reason="Warning: currenttemp rate "+r.rate+" != lastTemp rate "+a.lastTemp.rate+" from pumphistory; canceling temp",w.setTempBasal(0,0,I,ve,r);if(r&&a.lastTemp&&r.duration>0){var gr=cr-a.lastTemp.duration;if(gr>5&&cr>10)return ve.reason="Warning: currenttemp running but lastTemp from pumphistory ended "+gr+"m ago; canceling temp",w.setTempBasal(0,0,I,ve,r)}var fr=o(-a.activity*Je*5,2),hr=o(6*(De-fr));hr<0&&(hr=o(6*(Oe-fr)))<0&&(hr=o(6*(e.long_avgdelta-fr)));var vr=we,Br=(vr=a.iob>0?o(we-a.iob*Je):o(we-a.iob*Math.min(Je,I.sens)))+hr;if(void 0===Br||isNaN(Br))return ve.error="Error: could not calculate eventualBG. Sensitivity: "+Je+" Deviation: "+hr,ve;var _r=function(e,r,a){return o(a+(e-r)/24,1)}(Re,Br,fr);ve={temp:"absolute",bg:n(we,I),tick:Ie,eventualBG:Br,insulinReq:0,reservoir:D,deliverAt:Me,sensitivityRatio,TDD:he,insulin:fe};var Mr=[],Sr=[],yr=[],xr=[];Mr.push(we),Sr.push(we),xr.push(we),yr.push(we);var Ir=I.enableUAM,Fr=0,Tr=0;Fr=o(De-fr,1);var wr=o(De-fr,1);csf=Je/I.carb_ratio,console.error("profile.sens:"+n(I.sens,I)+", sens:"+n(Je,I)+", CSF:"+o(csf,1));var Cr=o(30*csf*5/60,1);Fr>Cr&&(console.error("Limiting carb impact from "+Fr+" to "+Cr+"mg/dL/5m (30g/h)"),Fr=Cr);var Dr=3;sensitivityRatio&&(Dr/=sensitivityRatio);var Or=Dr;if(T.carbs){Dr=Math.max(Dr,T.mealCOB/20);var Gr=o((new Date(xe).getTime()-T.lastCarbTime)/6e4),Rr=(T.carbs-T.mealCOB)/T.carbs;Or=o(Or=Dr+1.5*Gr/60,1),console.error("Last carbs "+Gr+" minutes ago; remainingCATime:"+Or+"hours; "+o(100*Rr)+"% carbs absorbed")}var Ur=Math.max(0,Fr/5*60*Or/2)/csf,Ar=90,Er=1;I.remainingCarbsCap&&(Ar=Math.min(90,I.remainingCarbsCap)),I.remainingCarbsFraction&&(Er=Math.min(1,I.remainingCarbsFraction));var Pr=1-Er,kr=Math.max(0,T.mealCOB-Ur-T.carbs*Pr),jr=(kr=Math.min(Ar,kr))*csf*5/60/(Or/2),qr=o(T.slopeFromMaxDeviation,2),Wr=o(T.slopeFromMinDeviation,2),zr=Math.min(qr,-Wr/3),Nr=0;0===Fr?Tr=0:!0===I.floating_carbs?(Tr=Math.min(60*Or/5/2,Math.max(0,T.carbs*csf/Fr)),Nr=Math.min(60*Or/5/2,Math.max(0,T.mealCOB*csf/Fr)),T.carbs>0&&(i+=", Floating Carbs:, CID: "+o(Tr,1)+", MealCarbs: "+o(T.carbs,1)+", Not Floating:, CID: "+o(Nr,1)+", MealCOB: "+o(T.mealCOB,1),console.error("Floating Carbs CID: "+o(Tr,1)+" / MealCarbs: "+o(T.carbs,1)+" vs. Not Floating:"+o(Nr,1)+" / MealCOB:"+o(T.mealCOB,1)))):Tr=Math.min(60*Or/5/2,Math.max(0,T.mealCOB*csf/Fr)),console.error("Carb Impact:"+Fr+"mg/dL per 5m; CI Duration:"+o(5*Tr/60*2,1)+"hours; remaining CI ("+o(Or/2,2)+"h peak):",o(jr,1)+"mg/dL per 5m");var Lr,Xr,Yr,Hr,Zr,$r=999,Jr=999,Kr=999,Qr=we,Vr=999,ea=999,ra=999,aa=999,ta=Br,oa=we,na=we,ia=0,sa=[],la=[];try{pr.forEach((function(e){var r=o(-e.activity*Je*5,2),a=o(-e.iobWithZeroTemp.activity*Je*5,2),t=Fr*(1-Math.min(1,Sr.length/12));ta=Sr[Sr.length-1]+r+t;var n=xr[xr.length-1]+a,i=Math.max(0,Math.max(0,Fr)*(1-Mr.length/Math.max(2*Tr,1))),s=Math.min(Mr.length,12*Or-Mr.length),l=Math.max(0,s/(Or/2*12)*jr);i+l,sa.push(o(l,0)),la.push(o(i,0)),COBpredBG=Mr[Mr.length-1]+r+Math.min(0,t)+i+l;var u=Math.max(0,wr+yr.length*zr),d=Math.max(0,wr*(1-yr.length/Math.max(36,1))),m=Math.min(u,d);m>0&&(ia=o(5*(yr.length+1)/60,1)),UAMpredBG=yr[yr.length-1]+r+Math.min(0,t)+m,Sr.length<48&&Sr.push(ta),Mr.length<48&&Mr.push(COBpredBG),yr.length<48&&yr.push(UAMpredBG),xr.length<48&&xr.push(n),COBpredBG<Vr&&(Vr=o(COBpredBG)),UAMpredBG<ea&&(ea=o(UAMpredBG)),ta<ra&&(ra=o(ta)),n<aa&&(aa=o(n));Sr.length>18&&ta<$r&&($r=o(ta)),ta>oa&&(oa=ta),(Tr||jr>0)&&Mr.length>18&&COBpredBG<Jr&&(Jr=o(COBpredBG)),(Tr||jr>0)&&COBpredBG>oa&&(na=COBpredBG),Ir&&yr.length>12&&UAMpredBG<Kr&&(Kr=o(UAMpredBG)),Ir&&UAMpredBG>oa&&UAMpredBG}))}catch(e){console.error("Problem with iobArray.  Optional feature Advanced Meal Assist disabled")}ve.predBGs={},Sr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))}));for(var ua=Sr.length-1;ua>12&&Sr[ua-1]===Sr[ua];ua--)Sr.pop();for(ve.predBGs.IOB=Sr,Yr=o(Sr[Sr.length-1]),xr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),ua=xr.length-1;ua>6&&!(xr[ua-1]>=xr[ua]||xr[ua]<=Re);ua--)xr.pop();if(ve.predBGs.ZT=xr,o(xr[xr.length-1]),T.mealCOB>0&&(Fr>0||jr>0)){for(Mr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),ua=Mr.length-1;ua>12&&Mr[ua-1]===Mr[ua];ua--)Mr.pop();ve.predBGs.COB=Mr,Hr=o(Mr[Mr.length-1]),Br=Math.max(Br,o(Mr[Mr.length-1]))}if(Fr>0||jr>0){if(Ir){for(yr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),ua=yr.length-1;ua>12&&yr[ua-1]===yr[ua];ua--)yr.pop();ve.predBGs.UAM=yr,Zr=o(yr[yr.length-1]),yr[yr.length-1]&&(Br=Math.max(Br,o(yr[yr.length-1])))}ve.eventualBG=Br}console.error("UAM Impact:"+wr+"mg/dL per 5m; UAM Duration:"+ia+"hours"),$r=Math.max(39,$r),Jr=Math.max(39,Jr),Kr=Math.max(39,Kr),Lr=o($r);var da=T.mealCOB/T.carbs;Xr=o(Kr<999&&Jr<999?(1-da)*UAMpredBG+da*COBpredBG:Jr<999?(ta+COBpredBG)/2:Kr<999?(ta+UAMpredBG)/2:ta),aa>Xr&&(Xr=aa),Qr=o(Qr=Tr||jr>0?Ir?da*Vr+(1-da)*ea:Vr:Ir?ea:ra);var ma=Kr;if(aa<Ze)ma=(Kr+aa)/2;else if(aa<Re){var ca=(aa-Ze)/(Re-Ze);ma=(Kr+(Kr*ca+aa*(1-ca)))/2}else aa>Kr&&(ma=(Kr+aa)/2);if(ma=o(ma),T.carbs)if(!Ir&&Jr<999)Lr=o(Math.max($r,Jr));else if(Jr<999){var pa=da*Jr+(1-da)*ma;Lr=o(Math.max($r,Jr,pa))}else Lr=Ir?ma:Qr;else Ir&&(Lr=o(Math.max($r,ma)));Lr=Math.min(Lr,Xr),process.stderr.write("minPredBG: "+n(Lr,I)+" minIOBPredBG: "+n($r,I)+" minZTGuardBG: "+n(aa,I)),Jr<999&&process.stderr.write(" minCOBPredBG: "+n(Jr,I)),Kr<999&&process.stderr.write(" minUAMPredBG: "+n(Kr,I)),console.error(" avgPredBG:"+n(Xr,I)+" COB/Carbs:"+T.mealCOB+"/"+T.carbs),na>we&&(Lr=Math.min(Lr,na)),ve.COB=T.mealCOB,ve.IOB=a.iob,ve.BGI=n(fr,I),ve.insulinForManualBolus=0,ve.deviation=n(hr,I),ve.dura_ISFratio=o(S,2),ve.bg_ISFratio=o(B,2),ve.delta_ISFratio=o(_,2),ve.pp_ISFratio=o(M,2),ve.acce_ISFratio=o(v,2),ve.auto_ISFratio=o(I.sens/Je,2),ve.ISF=n(Je,I),ve.CR=o(I.carb_ratio,2),ve.TDD=o(he,1),ve.TDDytd=o(Z,1),ve.TDD7d=o($,1),ve.target_bg=n(Re,I),ve.minDelta=De,ve.expectedDelta=_r,ve.minGuardBG=Qr,ve.minPredBG=Lr;var ba=function(e,r,a,t){if(!e.use_autoisf)return console.error("autoISF disabled, don't adjust SMB Delivery Ratio"),.5;var n=e.smb_delivery_ratio_bg_range;n<10&&(n/=.0555);var i=e.smb_delivery_ratio,s=Math.min(e.smb_delivery_ratio_min,e.smb_delivery_ratio_max),l=Math.max(e.smb_delivery_ratio_min,e.smb_delivery_ratio_max),u=a+e.smb_delivery_ratio_bg_range,d=i;return n>0&&(d=s+(l-s)*(r-a)/n,d=Math.max(s,Math.min(l,d))),"enforced"==t?(console.error("SMB delivery ratio set to "+o(Math.max(i,d),2)+" as max of fixed and interpolated values"),Math.max(i,d)):0==n?(console.error("SMB delivery ratio set to fixed value "+o(i,2)),i):r<=a?(console.error("SMB delivery ratio limited by minimum value "+o(s,2)),s):r>=u?(console.error("SMB delivery ratio limited by maximum value "+o(l,2)),l):(console.error("SMB delivery ratio set to interpolated value "+o(d,2)),d)}(I,we,Re,dr);ve.SMBratio=o(ba,2);var ga="SMB Del.Ratio:, "+o(ba,2);ve.reason=h+ga+f+i+", Standard, COB: "+ve.COB+", Dev: "+ve.deviation+", BGI: "+ve.BGI+", ISF: "+ve.ISF+", CR: "+ve.CR+", Target: "+ve.target_bg+", minPredBG "+n(Lr,I)+", minGuardBG "+n(Qr,I)+", IOBpredBG "+n(Yr,I),Hr>0&&(ve.reason+=", COBpredBG "+n(Hr,I)),Zr>0&&(ve.reason+=", UAMpredBG "+n(Zr,I)),ve.reason+=tddReason,ve.reason+="; ";var fa=vr;fa<40&&(fa=Math.min(Qr,fa));var ha=Ze-fa,va=240,Ba=240;if(T.mealCOB>0&&(Fr>0||jr>0)){for(ua=0;ua<Mr.length;ua++)if(Mr[ua]<Ue){va=5*ua;break}for(ua=0;ua<Mr.length;ua++)if(Mr[ua]<Ze){Ba=5*ua;break}}else{for(ua=0;ua<Sr.length;ua++)if(Sr[ua]<Ue){va=5*ua;break}for(ua=0;ua<Sr.length;ua++)if(Sr[ua]<Ze){Ba=5*ua;break}}mr&&Qr<Ze&&(console.error("minGuardBG "+n(Qr,I)+" projected below "+n(Ze,I)+" - disabling SMB"),_e=2,Be=o((Br-Re)/Je,2),mr=!1);var _a=.2;void 0!==I.maxDelta_bg_threshold&&(_a=Math.min(I.maxDelta_bg_threshold,.4),console.error("maxDelta threshold for BG-Jump to allow SMB's set to: "+100*_a+"%")),Ge>_a*we&&(console.error("maxDelta "+n(Ge,I)+" > "+100*_a+"% of BG "+n(we,I)+" - disabling SMB"),ve.reason+="maxDelta "+n(Ge,I)+" > "+100*_a+"% of BG "+n(we,I)+" - SMB disabled!, ",mr=!1),console.error("BG projected to remain above "+n(Ue,I)+" for "+va+"minutes"),(Ba<240||va<60)&&console.error("BG projected to remain above "+n(Ze,I)+" for "+Ba+"minutes");var Ma=Ba,Sa=I.current_basal*Je*Ma/60,ya=Math.max(0,T.mealCOB-.25*T.carbs),xa=(ha-Sa)/csf-ya;if(Sa=o(Sa),xa=o(xa),console.error("naive_eventualBG: "+n(vr,I)+", bgUndershoot: "+n(ha,I)+", zeroTempDuration: "+Ma+", zeroTempEffect: "+Sa+", carbsReq: "+xa),"Could not parse clock data"==T.reason?console.error("carbsReq unknown: Could not parse clock data"):xa>=I.carbsReqThreshold&&Ba<=45&&(ve.carbsReq=xa,ve.reason+=xa+" add'l carbs req w/in "+Ba+"m; "),Qe&&rr<=er)return ve.reason+="setting AIMI B30 Temp "+t(Ve,I)+"U/hr for "+(er-rr)+"m ",ve.temp="absolute",ve.deliverAt=Me,ve.duration=Math.min(30,er-rr),console.error("Forcing AIMI temp "+Ve+"U/hr"),w.setTempBasal(Ve,30,I,ve,r);var Ia=0;if(we<Ze&&a.iob<20*-I.current_basal/60&&De>0&&De>_r)ve.reason+="IOB "+a.iob+" < "+o(20*-I.current_basal/60,2),ve.reason+=" and minDelta "+n(De,I)+" > expectedDelta "+n(_r,I)+"; ";else if(we<Ze||Qr<Ze)return ve.reason+="minGuardBG "+n(Qr,I)+"<"+n(Ze,I),Ia=o(60*((ha=Re-Qr)/Je)/I.current_basal),Ia=30*o(Ia/30),Ia=Math.min(120,Math.max(30,Ia)),_e=3,Be=o((Br-Re)/Je,2),w.setTempBasal(0,Ia,I,ve,r);if(I.skip_neutral_temps&&ve.deliverAt.getMinutes()>=55){if(!mr)return ve.reason+="; Canceling temp at "+(60-ve.deliverAt.getMinutes())+"min before turn of the hour to avoid beeping of MDT. SMB disabled anyways.",w.setTempBasal(0,0,I,ve,r);console.error(60-ve.deliverAt.getMinutes()+"min before turn of the hour, but SMB's are enabled - no skipping neutral temps")}var Fa=0,Ta=ye;if(Br<Ue){if(ve.reason+="Eventual BG "+n(Br,I)+" < "+n(Ue,I),De>_r&&De>0&&!xa)return vr<40?(ve.reason+=", naive_eventualBG < 40. ",w.setTempBasal(0,30,I,ve,r)):(e.delta>De?ve.reason+=", but Delta "+n(Ie,I)+" > expectedDelta "+n(_r,I):ve.reason+=", but Min. Delta "+De.toFixed(2)+" > Exp. Delta "+n(_r,I),r.duration>15&&t(ye,I)===t(r.rate,I)?(ve.reason+=", temp "+r.rate+" ~ req "+ye+"U/hr. ",ve):(ve.reason+="; setting current basal of "+ye+" as temp. ",w.setTempBasal(ye,30,I,ve,r)));Fa=o(Fa=2*Math.min(0,(Br-Re)/Je),2);var wa=Math.min(0,(vr-Re)/Je);if(wa=o(wa,2),De<0&&De>_r)Fa=o(Fa*(De/_r),2);if(Ta=t(Ta=ye+2*Fa,I),r.duration*(r.rate-ye)/60<Math.min(Fa,wa)-.3*ye)return ve.reason+=", "+r.duration+"m@"+r.rate.toFixed(2)+" is a lot less than needed. ",w.setTempBasal(Ta,30,I,ve,r);if(void 0!==r.rate&&r.duration>5&&Ta>=.8*r.rate)return ve.reason+=", temp "+r.rate+" ~< req "+Ta+"U/hr. ",ve;if(Ta<=0){if((Ia=o(60*((ha=Re-vr)/Je)/I.current_basal))<0?Ia=0:(Ia=30*o(Ia/30),Ia=Math.min(120,Math.max(0,Ia))),Ia>0)return ve.reason+=", setting "+Ia+"m zero temp. ",w.setTempBasal(Ta,Ia,I,ve,r)}else ve.reason+=", setting "+Ta+"U/hr. ";return w.setTempBasal(Ta,30,I,ve,r)}if(De<_r&&(_e=4,Be=o((Br-Re)/Je,2),!C||!mr))return e.delta<De?ve.reason+="Eventual BG "+n(Br,I)+" > "+n(Ue,I)+" but Delta "+n(Ie,I)+" < Exp. Delta "+n(_r,I):ve.reason+="Eventual BG "+n(Br,I)+" > "+n(Ue,I)+" but Min. Delta "+De.toFixed(2)+" < Exp. Delta "+n(_r,I),r.duration>15&&t(ye,I)===t(r.rate,I)?(ve.reason+=", temp "+r.rate+" ~ req "+ye+"U/hr. ",ve):(ve.reason+="; setting current basal of "+ye+" as temp. ",w.setTempBasal(ye,30,I,ve,r));if(Math.min(Br,Lr)<Ae&&(Lr<Ue&&Br>Ue&&(_e=6,Be=o((Br-Re)/Je,2)),!C||!mr))return ve.reason+=n(Br,I)+"-"+n(Lr,I)+" in range: no temp required",r.duration>15&&t(ye,I)===t(r.rate,I)?(ve.reason+=", temp "+r.rate+" ~ req "+ye+"U/hr. ",ve):(ve.reason+="; setting current basal of "+ye+" as temp. ",w.setTempBasal(ye,30,I,ve,r));if(Br>=Ae&&(ve.reason+="Eventual BG "+n(Br,I)+" >= "+n(Ae,I)+", "),a.iob>Pe)return ve.reason+="IOB "+o(a.iob,2)+" > max_iob "+Pe,r.duration>15&&t(ye,I)===t(r.rate,I)?(ve.reason+=", temp "+r.rate+" ~ req "+ye+"U/hr. ",ve):(ve.reason+="; setting current basal of "+ye+" as temp. ",w.setTempBasal(ye,30,I,ve,r));Fa=o((Math.min(Lr,Br)-Re)/Je,2),Be=o((Br-Re)/Je,2),Fa>Pe-a.iob?(ve.reason+="max_iob "+Pe+", ",console.error("InsReq",o(Fa,2),"capped at "+o(Pe-a.iob,2)+" to not exceed max_iob"),Fa=Pe-a.iob):console.error("SMB not limited by maxIOB ( insulinReq: "+Fa+" U)."),Ta=t(Ta=ye+2*Fa,I),Fa=o(Fa,3),ve.insulinReq=Fa,ve.insulinForManualBolus=Be,ve.manualBolusErrorString=_e,ve.reason="Ins.Req: "+o(Fa,2)+", "+ve.reason;var Ca=o((new Date(xe).getTime()-a.lastBolusTime)/6e4,1);if(C&&mr&&we>Ze){var Da=o(T.mealCOB/I.carb_ratio,3);if(I.use_autoisf)Oa=I.smb_max_range_extension;else{console.error("autoISF disabled, SMB range extension disabled");var Oa=1}Oa>1&&console.error("SMB max range extended from default by factor "+Oa);var Ga=0;void 0===I.maxSMBBasalMinutes?(Ga=o(Oa*I.current_basal*30/60,1),console.error("profile.maxSMBBasalMinutes undefined: defaulting to 30m")):a.iob>Da&&a.iob>0?(console.error("IOB",a.iob,"> COB",T.mealCOB+"; mealInsulinReq =",Da),I.maxUAMSMBBasalMinutes?(console.error("profile.maxUAMSMBBasalMinutes:",I.maxUAMSMBBasalMinutes,"profile.current_basal:",I.current_basal),Ga=o(Oa*I.current_basal*I.maxUAMSMBBasalMinutes/60,1)):(console.error("profile.maxUAMSMBBasalMinutes undefined: defaulting to 30m"),Ga=o(30*I.current_basal/60,1))):(console.error("profile.maxSMBBasalMinutes:",I.maxSMBBasalMinutes,"profile.current_basal:",I.current_basal),Ga=o(Oa*I.current_basal*I.maxSMBBasalMinutes/60,1));var Ra=I.bolus_increment,Ua=1/Ra;I.use_autoisf||(console.error("autoISF disabled, don't adjust SMB Delivery Ratio"),ba=.5),ba>.5&&console.error("SMB Delivery Ratio increased from default 0.5 to "+o(ba,2));var Aa=Math.min(Fa*ba,Ga);Aa=Math.floor(Aa*Ua)/Ua,Ia=o(60*((Re-(vr+$r)/2)/Je)/I.current_basal),Fa>0&&Aa<Ra&&(Ia=0);var Ea=0;Ia<=0?Ia=0:Ia>=30?(Ia=30*o(Ia/30),Ia=Math.min(60,Math.max(0,Ia))):(Ea=o(ye*Ia/30,2),Ia=30),Aa>=Ga&&(ve.reason+="; maxBolus "+Ga),Ia>0&&(ve.reason+="; setting "+Ia+"m low temp of "+Ea+"U/h"),ve.reason+=". ";var Pa=3;I.SMBInterval&&(Pa=Math.min(10,Math.max(1,I.SMBInterval)));var ka=o(Pa-Ca,0),ja=o(60*(Pa-Ca),0)%60;if(console.error("naive_eventualBG "+n(vr,I)+", "+Ia+"m "+Ea+"U/h temp needed; last bolus "+Ca+"m ago; maxBolus: "+Ga),Ca>Pa?Aa>0&&(ve.units=Aa,ve.reason+="Microbolusing "+Aa+"U. "):ve.reason+="Waiting "+ka+"m "+ja+"s to microbolus again. ",Ia>0)return ve.rate=Ea,ve.duration=Ia,ve}var qa=w.getMaxSafeBasal(I);return Ta>qa&&(ve.reason+="adj. req. rate: "+o(Ta,2)+" to maxSafeBasal: "+o(qa,2)+", ",Ta=t(qa,I)),r.duration*(r.rate-ye)/60>=2*Fa?(ve.reason+=r.duration+"m@"+r.rate.toFixed(2)+" > 2 * insulinReq. Setting temp basal of "+Ta+"U/hr. ",w.setTempBasal(Ta,30,I,ve,r)):void 0===r.duration||0===r.duration?(ve.reason+="no temp, setting "+Ta+"U/hr. ",w.setTempBasal(Ta,30,I,ve,r)):r.duration>5&&t(Ta,I)<=t(r.rate,I)?(ve.reason+="temp "+r.rate+" >~ req "+Ta+"U/hr. ",ve):(ve.reason+="temp "+r.rate+"<"+Ta+"U/hr. ",w.setTempBasal(Ta,30,I,ve,r))}},6880:(e,r,a)=>{var t=a(6654);e.exports=function(e,r){var a=20;void 0!==r&&"string"==typeof r.model&&(t(r.model,"54")||t(r.model,"23"))&&(a=40);return e<1?Math.round(e*a)/a:e<10?Math.round(20*e)/20:Math.round(10*e)/10}},2705:(e,r,a)=>{var t=a(5639).Symbol;e.exports=t},9932:e=>{e.exports=function(e,r){for(var a=-1,t=null==e?0:e.length,o=Array(t);++a<t;)o[a]=r(e[a],a,e);return o}},9750:e=>{e.exports=function(e,r,a){return e==e&&(void 0!==a&&(e=e<=a?e:a),void 0!==r&&(e=e>=r?e:r)),e}},4239:(e,r,a)=>{var t=a(2705),o=a(9607),n=a(2333),i=t?t.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):n(e)}},531:(e,r,a)=>{var t=a(2705),o=a(9932),n=a(1469),i=a(3448),s=t?t.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(r){if("string"==typeof r)return r;if(n(r))return o(r,e)+"";if(i(r))return l?l.call(r):"";var a=r+"";return"0"==a&&1/r==-Infinity?"-0":a}},7561:(e,r,a)=>{var t=a(7990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,t(e)+1).replace(o,""):e}},1957:(e,r,a)=>{var t="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;e.exports=t},9607:(e,r,a)=>{var t=a(2705),o=Object.prototype,n=o.hasOwnProperty,i=o.toString,s=t?t.toStringTag:void 0;e.exports=function(e){var r=n.call(e,s),a=e[s];try{e[s]=void 0;var t=!0}catch(e){}var o=i.call(e);return t&&(r?e[s]=a:delete e[s]),o}},2333:e=>{var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},5639:(e,r,a)=>{var t=a(1957),o="object"==typeof self&&self&&self.Object===Object&&self,n=t||o||Function("return this")();e.exports=n},7990:e=>{var r=/\s/;e.exports=function(e){for(var a=e.length;a--&&r.test(e.charAt(a)););return a}},6654:(e,r,a)=>{var t=a(9750),o=a(531),n=a(554),i=a(9833);e.exports=function(e,r,a){e=i(e),r=o(r);var s=e.length,l=a=void 0===a?s:t(n(a),0,s);return(a-=r.length)>=0&&e.slice(a,l)==r}},1469:e=>{var r=Array.isArray;e.exports=r},3218:e=>{e.exports=function(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,r,a)=>{var t=a(4239),o=a(7005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==t(e)}},8601:(e,r,a)=>{var t=a(4841),o=1/0;e.exports=function(e){return e?(e=t(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},554:(e,r,a)=>{var t=a(8601);e.exports=function(e){var r=t(e),a=r%1;return r==r?a?r-a:r:0}},4841:(e,r,a)=>{var t=a(7561),o=a(3218),n=a(3448),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(o(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=o(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=t(e);var a=s.test(e);return a||l.test(e)?u(e.slice(2),a?2:8):i.test(e)?NaN:+e}},9833:(e,r,a)=>{var t=a(531);e.exports=function(e){return null==e?"":t(e)}}},r={};function a(t){var o=r[t];if(void 0!==o)return o.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var t=a(5546);freeaps_determineBasal=t})();